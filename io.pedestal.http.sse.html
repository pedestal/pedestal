<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>io.pedestal.http.sse documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Pedestal.service</span> <span class="project-version">0.5.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pedestal</span></div></div></li><li class="depth-3"><a href="io.pedestal.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.body-params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>body-params</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.content-negotiation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>content-negotiation</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.cors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.csrf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csrf</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-5"><a href="io.pedestal.http.impl.servlet-interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-interceptor</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.params.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.request.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.lazy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lazy</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.request.zerocopy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zerocopy</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.ring-middlewares.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>ring-middlewares</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.definition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definition</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.terse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>terse</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.route.definition.verbose.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>verbose</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.linear-search.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>linear-search</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.map-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.prefix-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prefix-tree</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.router.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>router</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.secure-headers.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>secure-headers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.servlet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet</span></div></a></li><li class="depth-4 current"><a href="io.pedestal.http.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3"><a href="io.pedestal.interceptor.html"><div class="inner"><span class="tree" style="top: -827px;"><span class="top" style="height: 836px;"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.chain.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chain</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.log.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-3"><a href="io.pedestal.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.pedestal.http.sse.html#var-COMMENT_FIELD"><div class="inner"><span>COMMENT_FIELD</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-counted-thread-factory"><div class="inner"><span>counted-thread-factory</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-CRLF"><div class="inner"><span>CRLF</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-daemon-thread-factory"><div class="inner"><span>daemon-thread-factory</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-DATA_FIELD"><div class="inner"><span>DATA_FIELD</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-do-heartbeat"><div class="inner"><span>do-heartbeat</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-end-event-stream"><div class="inner"><span>end-event-stream</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-EVENT_FIELD"><div class="inner"><span>EVENT_FIELD</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-get-bytes"><div class="inner"><span>get-bytes</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-ID_FIELD"><div class="inner"><span>ID_FIELD</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-mk-data"><div class="inner"><span>mk-data</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-scheduler"><div class="inner"><span>scheduler</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-send-event"><div class="inner"><span>send-event</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-sse-setup"><div class="inner"><span>sse-setup</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-start-event-stream"><div class="inner"><span>start-event-stream</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-start-stream"><div class="inner"><span>start-stream</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.sse.html#var-UTF-8"><div class="inner"><span>UTF-8</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.pedestal.http.sse</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-COMMENT_FIELD"><h3>COMMENT_FIELD</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-counted-thread-factory"><h3>counted-thread-factory</h3><div class="usage"><code>(counted-thread-factory name-format daemon)</code></div><div class="doc"><pre class="plaintext">Create a ThreadFactory that maintains a counter for naming Threads.
name-format specifies thread names - use %d to include counter
daemon is a flag for whether threads are daemons or not</pre></div></div><div class="public anchor" id="var-CRLF"><h3>CRLF</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-daemon-thread-factory"><h3>daemon-thread-factory</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-DATA_FIELD"><h3>DATA_FIELD</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-do-heartbeat"><h3>do-heartbeat</h3><div class="usage"><code>(do-heartbeat channel)</code><code>(do-heartbeat channel {:keys [on-client-disconnect]})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-end-event-stream"><h3>end-event-stream</h3><h4 class="deprecated">deprecated in 0.4.0</h4><div class="usage"><code>(end-event-stream {end-fn :io.pedestal.http.sse/end-event-stream})</code></div><div class="doc"><pre class="plaintext">DEPRECATED. Given a `context`, clean up the event stream it represents.
</pre></div></div><div class="public anchor" id="var-EVENT_FIELD"><h3>EVENT_FIELD</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-bytes"><h3>get-bytes</h3><div class="usage"><code>(get-bytes s)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-ID_FIELD"><h3>ID_FIELD</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-mk-data"><h3>mk-data</h3><div class="usage"><code>(mk-data name data)</code><code>(mk-data name data id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-scheduler"><h3>scheduler</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-send-event"><h3>send-event</h3><div class="usage"><code>(send-event channel name data)</code><code>(send-event channel name data id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-sse-setup"><h3>sse-setup</h3><div class="usage"><code>(sse-setup &amp; args)</code></div><div class="doc"><pre class="plaintext">See start-event-stream. This function is for backward compatibility.
</pre></div></div><div class="public anchor" id="var-start-event-stream"><h3>start-event-stream</h3><div class="usage"><code>(start-event-stream stream-ready-fn)</code><code>(start-event-stream stream-ready-fn heartbeat-delay)</code><code>(start-event-stream stream-ready-fn heartbeat-delay bufferfn-or-n)</code><code>(start-event-stream stream-ready-fn heartbeat-delay bufferfn-or-n opts)</code></div><div class="doc"><pre class="plaintext">Returns an interceptor which will start a Server Sent Event stream
with the requesting client, and set the ServletResponse to go
async. After the request handling context has been paused in the
Servlet thread, `stream-ready-fn` will be called in a future, with
the resulting context from setting up the SSE event stream.

opts is a map with optional keys:

:on-client-disconnect - A function of one argument which will be
  called when the client permanently disconnects.</pre></div></div><div class="public anchor" id="var-start-stream"><h3>start-stream</h3><div class="usage"><code>(start-stream stream-ready-fn context heartbeat-delay)</code><code>(start-stream stream-ready-fn context heartbeat-delay bufferfn-or-n)</code><code>(start-stream stream-ready-fn context heartbeat-delay bufferfn-or-n opts)</code></div><div class="doc"><pre class="plaintext">Starts an SSE event stream and initiates a heartbeat to keep the
connection alive. `stream-ready-fn` will be called with a core.async
channel. The application can then put maps with keys :name and :data
on that channel to cause SSE events to be sent to the client. Either
the client or the application may close the channel to terminate and
clean up the event stream; the client closes it by closing the
connection.

The SSE's core.async buffer can either be a fixed buffer (n) or a 0-arity
function that returns a buffer.</pre></div></div><div class="public anchor" id="var-UTF-8"><h3>UTF-8</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>